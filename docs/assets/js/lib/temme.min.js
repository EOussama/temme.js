"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var a={temmeIds:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},name:{default:"div",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},id:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},classes:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},attributes:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},dataset:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},text:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},html:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},children:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},ref:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},from:{default:{ref:"",mode:"append",allowChildren:!1},type:"object",keys:{ref:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},mode:{default:"append",type:"string",values:["append","override"],isValid:function(e){return null!=e&&"string"==typeof e}},allowChildren:{default:!1,type:"boolean",isValid:function(e){return null!=e&&"boolean"==typeof e}}},isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}}};function f(t,e){for(var r in t){if(!(r in a))throw new l("InvalidOptionNameError","“".concat(r,"” is not a valid option."));if(!a[r].isValid(t[r]))throw new l("InvalidOptionTypeError","The option “".concat(r,"” must be of type ").concat(a[r].type,"."))}var n,o;for(var i in t.temmeIds=Array.from(e),t.temmeIds.push((n="0123456789abcdefghijklmnopqrstuvwxyz",o="",_toConsumableArray(Array(6).keys()).forEach(function(){var e=Math.floor(Math.random()*n.length),t=Math.floor(2*Math.random());o+=1===t?n[e].toUpperCase():n[e]}),o)),a)i in t||("object"===a[i].type?t[i]=Object.create(a[i].default):t[i]=a[i].default);"children"in t&&t.children.forEach(function(e){f(e,t.temmeIds)})}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"TemmeError",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Something went wrong.";this.name=e,this.message=t}function t(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;try{if(null==t||"object"!==_typeof(t)||Array.isArray(t))throw new l("InvalidHierarchyError","The hierarchy object is invalid.");if(!(r instanceof HTMLElement))throw new l("InvalidTargetError","The target must be a valid HTML element.");f(t,[]),function t(e,r,n){"ref"in e&&0<e.ref.length&&n.push({refElement:e,depth:r}),"children"in e&&e.children.forEach(function(e){t(e,++r,n)})}(t,0,e=[]),function t(i,r,n){for(var e in i)switch(e){case"from":if(!("ref"in i.from))throw new l("InvalidReferencingObject","The “from” option must have a “ref” key, otherwise, it's invalid");for(var o in i.from){if(!Object.keys(a.from.keys).includes(o))throw new l("InvalidReferencingObject","“".concat(o,"” is an invalid key to have in the “from” option."));if(!a.from.keys[o].isValid(i.from[o]))throw new l("InvalidReferencingObject","“".concat(i.from[o],"” is not a valid value for “").concat(o,"” of the “from” option."));if("values"in a.from.keys[o]&&!a.from.keys[o].values.includes(i.from[o]))throw new l("InvalidReferencingObject","“".concat(i.from[o],"” is not a valid value for “").concat(o,"” of the “from” option."))}0<i.from.ref.length&&function(){var e=function(e){switch(e){case"append":var t=function(r){if(!["from","ref","name","children","temmeIds"].includes(r))switch(a[r].type){case"array":var e=o.refElement[r].filter(function(e,t){return!i[r].includes(e)&&o.refElement[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(i[r]).concat(_toConsumableArray(e)).sort();i[r]=t;break;case"object":for(var n in o.refElement[r])n in i[r]||(i[r][n]=o.refElement[r][n])}};for(var r in o.refElement)t(r);break;case"override":for(var r in o.refElement)if(!["from","ref","name","temmeIds",!0!==i.from.allowChildren?"children":""].includes(r))switch(a[r].type){case"object":for(var n in o.refElement[r])i[r][n]=o.refElement[r][n];break;default:i[r]=o.refElement[r]}break;default:throw l("InvalidReferenceMode","“".concat(e,"” is not a valid referencing mode."))}},o=n.filter(function(e){return e.refElement.ref===i.from.ref&&e.depth<r}).sort(function(e,t){return t.depth-e.depth})[0];if(!0===i.from.allowChildren&&i.temmeIds.includes(o.refElement.temmeIds[o.refElement.temmeIds.length-1]))throw new l("InvalidReference","Elements cannot reference their parents while “allowChildren” is set to “true”.");if(void 0===o)throw new l("InvalidReference","“".concat(i.from.ref,"” is an invalid reference."));"mode"in i.from?e(i.from.mode):e("append")}()}"children"in i&&i.children.forEach(function(e){t(e,++r,n)})}(t,0,e),function n(o,i){var e=function(r){switch(r){case"id":o[r]!==a[r].default&&(i.id=o[r]);break;case"classes":if(o[r]!==a[r].default){var e=o[r].filter(function(e,t){return!i.classList.contains(e)&&o[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(i.classList).concat(_toConsumableArray(e)).sort().join(" ");i.classList=t}break;case"attributes":o[r]!==a[r].default&&Object.keys(o[r]).forEach(function(e){i.setAttribute(e,o[r][e])});break;case"dataset":o[r]!==a[r].default&&Object.assign(i.dataset,o[r]);break;case"text":o[r]!==a[r].default&&(i.textContent=o[r]);break;case"html":o[r]!==a[r].default&&(i.innerHTML=o[r]);break;case"children":o[r]!==a[r].default&&o.children.forEach(function(e){var t=document.createElement(e.name);n(e,t),i.appendChild(t)})}};for(var t in o)e(t)}(t,r)}catch(e){throw e.message="[Temme JS]: ".concat(e.message),e}}l.prototype=Error.prototype,"undefined"!=typeof exports?module.exports=t:e.Temme=t}("undefined"!=typeof window?window:void 0);