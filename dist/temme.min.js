"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var a={name:{default:"div",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},id:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},classes:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},attributes:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},dataset:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},text:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},html:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},children:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},ref:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},from:{default:{ref:""},type:"object",keys:["ref","mode","children"],isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}}};function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"TemmeError",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Something went wrong.";this.name=e,this.message=t}function t(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;try{if(null==t||"object"!==_typeof(t)||Array.isArray(t))throw new f("InvalidHierarchyError","The hierarchy object is invalid.");if(!(r instanceof HTMLElement))throw new f("InvalidTargetError","The target must be a valid HTML element.");!function t(e){for(var r in e){if(!(r in a))throw new f("InvalidOptionNameError","“".concat(r,"” is not a valid option."));if(!a[r].isValid(e[r]))throw new f("InvalidOptionTypeError","The option “".concat(r,"” must be of type ").concat(a[r].type,"."))}for(var n in a)n in e||("object"===a[n].type?e[n]=Object.create(a[n].default):e[n]=a[n].default);"children"in e&&e.children.forEach(function(e){t(e)})}(t),function t(e,r,n){"ref"in e&&0<e.ref.length&&n.push({refElement:e,depth:r}),"children"in e&&e.children.forEach(function(e){t(e,++r,n)})}(t,0,e=[]),function t(o,r,n){for(var e in o)switch(e){case"from":if(!("ref"in o.from))throw new f("InvalidReferencingObject","The “from” option must have a “ref” key, otherwise, it's invalid");for(var i in o.from)if(!a.from.keys.includes(i))throw new f("InvalidReferencingObject","“".concat(i,"” is an invalid key to have in the “from” option."));0<o.from.ref.length&&function(){var e=function(e){switch(e){case"append":var t=function(r){if(!["from","ref","name","children"].includes(r))switch(a[r].type){case"array":if(0<o[r].length){var e=i.refElement[r].filter(function(e,t){return!o[r].includes(e)&&i.refElement[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(o[r]).concat(_toConsumableArray(e)).sort();o[r]=t}break;case"object":for(var n in i.refElement[r])n in o[r]||(o[r][n]=i.refElement[r][n])}};for(var r in i.refElement)t(r);break;case"override":for(var r in i.refElement)if(!["from","ref","name","children"].includes(r))switch(a[r].type){case"object":for(var n in i.refElement[r])o[r][n]=i.refElement[r][n];break;default:o[r]=i.refElement[r]}break;default:throw f("InvalidReferenceMode","“".concat(e,"” is not a valid referencing mode."))}},i=n.filter(function(e){return e.refElement.ref===o.from.ref&&e.depth<r}).sort(function(e,t){return t.depth-e.depth})[0];if(void 0===i)throw new f("InvalidReference","“".concat(o.from.ref,"” is an invalid reference."));"mode"in o.from?e(o.from.mode):e("append")}()}"children"in o&&o.children.forEach(function(e){t(e,++r,n)})}(t,0,e),function n(i,o){var e=function(r){switch(r){case"id":i[r]!==a[r].default&&(o.id=i[r]);break;case"classes":if(i[r]!==a[r].default){var e=i[r].filter(function(e,t){return!o.classList.contains(e)&&i[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(o.classList).concat(_toConsumableArray(e)).sort().join(" ");o.classList=t}break;case"attributes":i[r]!==a[r].default&&Object.keys(i[r]).forEach(function(e){o.setAttribute(e,i[r][e])});break;case"dataset":i[r]!==a[r].default&&Object.assign(o.dataset,i[r]);break;case"text":i[r]!==a[r].default&&(o.textContent=i[r]);break;case"html":i[r]!==a[r].default&&(o.innerHTML=i[r]);break;case"children":i[r]!==a[r].default&&i.children.forEach(function(e){var t=document.createElement(e.name);n(e,t),o.appendChild(t)})}};for(var t in i)e(t)}(t,r)}catch(e){throw e.message="[Temme JS]: ".concat(e.message),e}}f.prototype=Error.prototype,"undefined"!=typeof exports?module.exports=t:e.Temme=t}("undefined"!=typeof window?window:void 0);