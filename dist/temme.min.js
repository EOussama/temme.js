"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var d={temmeIds:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},name:{default:"div",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},id:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},classes:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},attributes:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},dataset:{default:{},type:"object",isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}},text:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},html:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},children:{default:[],type:"array",isValid:function(e){return null!=e&&Array.isArray(e)}},ref:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},from:{default:{ref:"",mode:"append",children:{allow:!1,placement:"after"}},type:"object",keys:{ref:{default:"",type:"string",isValid:function(e){return null!=e&&"string"==typeof e}},mode:{default:"append",type:"string",values:["append","override"],isValid:function(e){return null!=e&&"string"==typeof e}},children:{default:{allow:!1,placement:"after"},type:"object",keys:{allow:{default:!1,type:"boolean",isValid:function(e){return null!=e&&"boolean"==typeof e}},placement:{default:"after",type:"string",values:["after","before"],isValid:function(e){return null!=e&&"string"==typeof e}}},isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}}},isValid:function(e){return null!=e&&!Array.isArray(e)&&"object"===_typeof(e)}}};function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"TemmeError",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Something went wrong.";this.name=e,this.message=t}function l(t,e){for(var r in t){if(!(r in d))throw new u("InvalidOptionNameError","“".concat(r,"” is not a valid option."));if(!d[r].isValid(t[r]))throw new u("InvalidOptionTypeError","The option “".concat(r,"” must be of type ").concat(d[r].type,"."));if("ref"===r&&"@"===t[r].trim()[0])throw new u("InvalidReference","References should not start with the symbole `@`.")}var n,a;for(var i in t.temmeIds=Array.from(e),t.temmeIds.push((n="0123456789abcdefghijklmnopqrstuvwxyz",a="",_toConsumableArray(Array(6).keys()).forEach(function(){var e=Math.floor(Math.random()*n.length),t=Math.floor(2*Math.random());a+=1===t?n[e].toUpperCase():n[e]}),a)),d)if(i in t){if("from"===i)if("children"in t.from)for(var o in d.from.keys.children.keys)o in t.from.children||(t.from.children[o]=d.from.keys.children.keys[o].default);else t.from.children=Object.create(d.from.keys.children.default)}else"object"===d[i].type?t[i]=Object.create(d[i].default):t[i]=d[i].default;"children"in t&&t.children.forEach(function(e){l(e,t.temmeIds)})}function t(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,t,r){};try{if(null==t||"object"!==_typeof(t)||Array.isArray(t))throw new u("InvalidHierarchyError","The hierarchy object is invalid.");if(!(r instanceof HTMLElement))throw new u("InvalidTargetError","The target must be a valid HTML element.");l(t,[]),function t(e,r,n){"ref"in e&&0<e.ref.length&&n.push({refElement:e,depth:r}),"children"in e&&e.children.forEach(function(e){t(e,++r,n)})}(t,0,e=[]),function t(f,c,s){for(var e in f)switch(e){case"from":if(!("ref"in f.from))throw new u("InvalidReferencingObject","The “from” option must have a “ref” key, otherwise, it's invalid");for(var r in f.from){if(!Object.keys(d.from.keys).includes(r))throw new u("InvalidReferencingObject","“".concat(r,"” is an invalid key to have in the “from” option."));if(!d.from.keys[r].isValid(f.from[r]))throw new u("InvalidReferencingObject","“".concat(f.from[r],"” is not a valid value for “").concat(r,"” of the “from” option."));if("values"in d.from.keys[r]&&!d.from.keys[r].values.includes(f.from[r]))throw new u("InvalidReferencingObject","“".concat(f.from[r],"” is not a valid value for “").concat(r,"” of the “from” option."))}0<f.from.ref.length&&function(){var e=function(e){switch(e){case"append":var t=function(r){if(!["from","ref","id","name","temmeIds",!0!==f.from.children.allow?"children":""].includes(r))switch(d[r].type){case"array":if("children"!==r){var e=o.refElement[r].filter(function(e,t){return!f[r].includes(e)&&o.refElement[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(f[r]).concat(_toConsumableArray(e)).sort();f[r]=t}else switch(f.from.children.placement){case"after":var n;(n=f[r]).push.apply(n,_toConsumableArray(o.refElement[r]));break;case"before":var a;(a=f[r]).unshift.apply(a,_toConsumableArray(o.refElement[r]));break;default:throw new u("InvalidReferencingObject","“".concat(f.from.children.placement,"” is an invalid placement."))}break;case"object":for(var i in o.refElement[r])i in f[r]||(f[r][i]=o.refElement[r][i]);break;default:f[r]=o.refElement[r]}};for(var r in o.refElement)t(r);break;case"override":for(var r in o.refElement)if(!["from","ref","name","temmeIds",!0!==f.from.children.allow?"children":""].includes(r))switch(d[r].type){case"object":for(var n in o.refElement[r])f[r][n]=o.refElement[r][n];break;default:f[r]=o.refElement[r]}break;default:throw new u("InvalidReferenceMode","“".concat(e,"” is not a valid referencing mode."))}},o={refElement:{},depth:c};if("@"===f.from.ref.trim()[0]){var t=f.from.ref.slice(1),r=document.querySelector(t);if(!(null!=r||r instanceof HTMLElement))throw new u("InvalidReference","No valid HTML element corresponds to the CSS selector “".concat(t,"”"));var n={},a={};for(var i in r.attributes)isNaN(parseInt(i))||["id","class"].includes(r.attributes[i].nodeName)||r.attributes[i].nodeName.startsWith("data-")||(n[r.attributes[i].nodeName]=r.attributes[i].nodeValue);for(var l in r.dataset)a[l]=r.dataset[l];o.refElement={id:r.id,html:r.innerHTML,classes:_toConsumableArray(r.classList),attributes:n,dataset:a}}else o=s.filter(function(e){return e.refElement.ref===f.from.ref&&e.depth<c}).sort(function(e,t){return t.depth-e.depth})[0];if(!0===f.from.children.allow&&f.temmeIds.includes(o.refElement.temmeIds[o.refElement.temmeIds.length-1]))throw new u("InvalidReference","Elements cannot reference their parents while “from.children.allow” is set to “true”.");if(void 0===o)throw new u("InvalidReference","“".concat(f.from.ref,"” is an invalid reference."));"mode"in f.from?e(f.from.mode):e("append")}()}"children"in f&&f.children.forEach(function(e){t(e,++c,s)})}(t,0,e),function n(a,i,o){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,t,r){},e=function(r){switch(r){case"id":a[r]!==d[r].default&&(i.id=a[r]);break;case"classes":if(a[r]!==d[r].default){var e=a[r].filter(function(e,t){return!i.classList.contains(e)&&a[r].indexOf(e)===t&&0<e.trim().length}),t=_toConsumableArray(i.classList).concat(_toConsumableArray(e)).sort().join(" ");i.classList=t}break;case"attributes":a[r]!==d[r].default&&Object.keys(a[r]).forEach(function(e){i.setAttribute(e,a[r][e])});break;case"dataset":a[r]!==d[r].default&&Object.assign(i.dataset,a[r]);break;case"text":a[r]!==d[r].default&&(i.textContent=a[r]);break;case"html":a[r]!==d[r].default&&(i.innerHTML=a[r]);break;case"children":a[r]!==d[r].default&&a.children.forEach(function(e){var t=document.createElement(e.name);i.appendChild(t),n(e,t,++o,l)})}};for(var t in a)e(t);l(a.temmeIds[a.temmeIds.length-1],a,o)}(t,r,0,a),n()}catch(e){throw e.message="[Temme JS]: ".concat(e.message),e}}u.prototype=Error.prototype,"undefined"!=typeof exports?module.exports=t:e.Temme=t}("undefined"!=typeof window?window:void 0);